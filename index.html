<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!--
    1) Page title updated (requested)
  -->
  <title>Doodle Derby 2D ‚Äî Where doodles come to race</title>

  <link rel="stylesheet" href="style.css" />
</head>

<body>
  <!--
    HEADER
    2) Header height constrained ~150px max
    3) Tagline on right
    4) Navigation bar added (Home / Results / About)
  -->
  <header class="topbar" role="banner">
    <div class="topbar-inner">
      <div class="brand">
        <!--
          NOTE: previously you requested 670x142.
          We keep the intrinsic attributes, but CSS now scales it down
          so the overall header stays <= ~150px.
        -->
        <img
          class="brand-logo"
          src="assets/title_full.png"
          alt="Doodle Derby 2D"
          width="670"
          height="142"
        />
      </div>

      <div class="header-right">
        <!-- Tagline (nice clean sans-serif; not in header font serif) -->
        <div class="tagline">Where doodles come to race</div>
      </div>
    </div>

    <!-- Navigation row (anticipating future pages) -->
    <nav class="topnav" aria-label="Primary navigation">
      <div class="topnav-inner">
        <!-- For now these are placeholders. You can swap hrefs later. -->
        <a class="navlink active" href="index.html">Home</a>
        <a class="navlink" href="results.html">Results</a>
        <a class="navlink" href="about.html">About</a>
      </div>
    </nav>
  </header>

  <!--
    APP LAYOUT
    6) Status pill moved OUT of header and into the page (workspace top)
  -->
  <div id="app">
    <aside id="toolbar" aria-label="Car designer controls">

      <!--
        Tabs / Steps
        9) Numbers now appear as circles for a nicer look.
        Also: removed the "1)" "2)" style.
      -->
      <div class="tabs" role="tablist" aria-label="Editor steps">
        <button id="bodyTab" class="tab active" role="tab" aria-selected="true">
          <span class="step">1</span> Body
        </button>
        <button id="wheelTab" class="tab" role="tab" aria-selected="false">
          <span class="step">2</span> Wheel
        </button>
        <button id="placementTab" class="tab" role="tab" aria-selected="false">
          <span class="step">3</span> Wheels
        </button>
        <button id="propertiesTab" class="tab" role="tab" aria-selected="false">
          <span class="step">4</span> Performance
        </button>
        <button id="submitTab" class="tab" role="tab" aria-selected="false">
          <span class="step">5</span> Submit
        </button>
      </div>

      <!-- =======================
           BODY CONTROLS
           ======================= -->
      <section id="bodyControls" class="tab-content active" role="tabpanel">
        <h2 class="panel-title">Car body</h2>
        <p class="panel-subtitle">
          Draw the body or upload an image. Use <strong>Move</strong> to drag the body around the canvas.
        </p>

        <div class="control-group">
          <div class="row">
            <button id="bodyPenBtn" class="btn primary">‚úèÔ∏è Draw body</button>
            <button id="bodyMoveBtn" class="btn">üñêÔ∏è Move body</button>
          </div>

          <label class="field">
            <span>Pen colour</span>
            <input type="color" id="bodyColor" value="#2C2B3A" />
          </label>

          <!-- 8) Spacing improvement: each "cluster" separated by .stack -->
          <div class="stack">
            <label class="file">
              Upload body image
              <input type="file" id="uploadBody" accept="image/*" />
            </label>
          </div>

          <div class="row">
            <button id="bodyUndoBtn" class="btn">Undo</button>
            <button id="bodyRedoBtn" class="btn">Redo</button>
          </div>

          <div class="stack">
            <button id="bodyClearBtn" class="btn danger">Clear body</button>
          </div>
        </div>
      </section>

      <!-- =======================
           WHEEL CONTROLS
           ======================= -->
      <section id="wheelControls" class="tab-content" role="tabpanel">
        <h2 class="panel-title">Wheel</h2>
        <p class="panel-subtitle">
          Draw or upload a wheel. This becomes the ‚Äúmaster wheel‚Äù you can place multiple times.
        </p>

        <div class="control-group">
          <div class="row">
            <button id="wheelPenBtn" class="btn primary">‚úèÔ∏è Draw wheel</button>
            <button id="wheelMoveBtn" class="btn">üñêÔ∏è Inspect</button>
          </div>

          <label class="field">
            <span>Pen colour</span>
            <input type="color" id="wheelColor" value="#2C2B3A" />
          </label>

          <div class="stack">
            <label class="file">
              Upload wheel image (square)
              <input type="file" id="uploadWheel" accept="image/*" />
            </label>
          </div>

          <div class="row">
            <button id="wheelUndoBtn" class="btn">Undo</button>
            <button id="wheelRedoBtn" class="btn">Redo</button>
          </div>

          <div class="stack">
            <button id="wheelClearBtn" class="btn danger">Clear wheel</button>
          </div>
        </div>
      </section>

      <!-- =======================
           PLACEMENT CONTROLS
           ======================= -->
      <section id="placementControls" class="tab-content" role="tabpanel">
        <h2 class="panel-title">Place wheels</h2>
        <p class="panel-subtitle">
          Click a wheel to select it, then drag it. Scale/rotate using the sliders.
          (Wheels are positioned relative to the body ‚Äî if you move the body later, wheels come with it.)
        </p>

        <div class="control-group">
          <button id="addWheelBtn" class="btn primary">‚ûï Add wheel to car</button>

          <div class="row">
            <button id="duplicateWheelBtn" class="btn">Duplicate selected</button>
            <button id="deleteWheelBtn" class="btn danger">Delete selected</button>
          </div>

          <hr class="divider" />

          <label class="field">
            <span>Selected wheel scale</span>
            <input type="range" id="wheelScale" min="0.2" max="3" step="0.05" value="1" />
          </label>

          <label class="field">
            <span>Selected wheel rotation</span>
            <input type="range" id="wheelRotation" min="-180" max="180" step="1" value="0" />
          </label>

          <div class="pill-row">
            <span class="pill" id="selectedWheelLabel">No wheel selected</span>
            <span class="pill" id="wheelCountLabel">Wheels: 0</span>
          </div>
        </div>
      </section>

      <!-- =======================
           PROPERTIES CONTROLS
           ======================= -->
      <section id="propertiesControls" class="tab-content" role="tabpanel">
        <h2 class="panel-title">Performance (100 credits)</h2>
        <p class="panel-subtitle">
          Allocate exactly <strong>100</strong> credits between acceleration and top speed.
        </p>

        <div class="control-group">
          <label class="field">
            <span>Acceleration: <strong id="accVal">50</strong></span>
            <input type="range" id="acceleration" min="0" max="100" step="1" value="50" />
          </label>

          <label class="field">
            <span>Top speed: <strong id="speedVal">50</strong></span>
            <input type="range" id="topSpeed" min="0" max="100" step="1" value="50" />
          </label>

          <div class="pill-row">
            <span class="pill emphasis">
              Remaining: <strong id="pointsRemaining">0</strong>
            </span>
            <span class="pill" id="creditsHelp">Must be 0 to submit</span>
          </div>

          <div class="row">
            <button id="presetBalancedBtn" class="btn">Balanced (50/50)</button>
            <button id="presetSpeedBtn" class="btn">Speedster (30/70)</button>
          </div>
        </div>
      </section>

      <!-- =======================
           SUBMIT CONTROLS
           ======================= -->
      <section id="submitControls" class="tab-content" role="tabpanel">
        <h2 class="panel-title">Submit</h2>
        <p class="panel-subtitle">
          We‚Äôll send your artwork + wheel layout + performance credits to the server.
        </p>

        <div class="control-group">
          <label class="field">
            <span>Team name</span>
            <input type="text" id="teamName" placeholder="e.g., The Acton Aces" />
          </label>

          <label class="field">
            <span>Car name</span>
            <input type="text" id="carName" placeholder="e.g., Biscuit Rocket" />
          </label>

          <label class="field">
            <span>Email</span>
            <input type="email" id="email" placeholder="you@example.com" />
          </label>

          <div class="stack">
            <button id="submitBtn" class="btn primary">üöÄ Submit car</button>
          </div>

          <p id="submitStatus" class="submit-status" aria-live="polite"></p>
        </div>

        <div class="note">
          Endpoint configured in <code>script.js</code>.
        </div>
      </section>
    </aside>

    <main id="workspace" aria-label="Canvas workspace">
      <div class="workspace-inner">

        <!-- 6) Status moved into page (looks ‚Äúapp-like‚Äù now) -->
        <div class="workspace-topbar">
          <div class="workspace-title">
            Car Designer
            <span class="workspace-subtitle">Build your racer for the weekly YouTube showdown.</span>
          </div>

          <div class="status-pill" id="uiStatusPill" aria-live="polite">
            Editor ready
          </div>
        </div>

        <div class="workspace-grid">
          <div class="canvas-card">
            <div class="canvas-header">
              <div>
                <div class="canvas-title" id="canvasTitle">Body canvas</div>
                <div class="canvas-subtitle" id="canvasSubtitle">Draw the car body here</div>
              </div>

              <div class="canvas-actions">
                <button id="centerBodyBtn" class="btn small">Center body</button>
                <button id="exportPreviewBtn" class="btn small">Export preview PNG</button>
              </div>
            </div>

            <div class="canvas-wrap">
              <canvas id="bodyCanvas" width="1024" height="512"></canvas>
              <canvas id="wheelCanvas" width="256" height="256"></canvas>
            </div>

            <!--
              7) Tips moved underneath drawing area
              This is dynamic: editor.js updates it per tab.
            -->
            <div class="workspace-tips" aria-label="Tips">
              <div class="tips-title">Tips</div>
              <div class="tips-text" id="tipsText">
                Draw the car body or upload a PNG with transparency.
              </div>
            </div>
          </div>

          <div class="preview-card">
            <div class="canvas-header">
              <div>
                <div class="canvas-title">Live preview</div>
                <div class="canvas-subtitle">
                  This is what the race engine will effectively see.
                </div>
              </div>
            </div>

            <div class="preview-wrap">
              <canvas id="previewCanvas" width="512" height="256"></canvas>
            </div>

            <div class="note">
              Preview includes the body position + wheels.
            </div>
          </div>
        </div>
      </div>
    </main>
  </div>

  <script src="script.js"></script>
  <script src="editor.js"></script>
</body>
</html>
