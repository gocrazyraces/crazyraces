<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <title>Rapid Racers 2D - Car Designer</title>

  <link rel="stylesheet" href="style.css" />
</head>

<body>
  <!-- =========================================================
       HEADER
       - Header background changed to match upload button background
       - Tagline removed (in your header image)
       - Next race box now includes time (20:00 GMT)
       ========================================================= -->
  <header class="topbar" role="banner">
    <div class="topbar-inner">
      <div class="brand">
        <img
          class="brand-logo"
          src="assets/title_full.png"
          alt="Rapid Racers 2D"
          width="670"
          height="142"
        />
      </div>

      <div class="next-race" aria-label="Next race date">
        <span class="next-race-label">Next race:</span>
        <span id="nextRaceDate" class="next-race-date">—</span>
      </div>
    </div>

    <!-- Navigation row -->
    <nav class="topnav" aria-label="Primary navigation">
      <div class="topnav-inner">
        <a class="navlink active" href="index.html">Home</a>
        <a class="navlink" href="races.html">Races</a>
        <a class="navlink" href="faq.html">FAQ</a>
        <a class="navlink" href="contact.html">Contact</a>
      </div>
    </nav>
  </header>

  <!-- =========================================================
       FULL-WIDTH PAGE BAR ABOVE TABS
       - Now includes live countdown: (Xd Ym Zs to go)
       ========================================================= -->
  <div class="pagebar" role="heading" aria-level="1">
    <div class="pagebar-inner">
      <div class="pagebar-title">
        Design your car for the next race
        <span id="nextRaceCountdown" class="pagebar-countdown">(…)</span>
      </div>
    </div>
  </div>

  <!-- =========================================================
       APP
       ========================================================= -->
  <div id="app">
    <!-- LEFT TOOLBAR -->
    <aside id="toolbar" aria-label="Car designer controls">

      <!-- Step tabs -->
      <div class="tabs" role="tablist" aria-label="Editor steps">
        <button id="bodyTab" class="tab active" role="tab" aria-selected="true">
          <span class="step">1</span> Body
        </button>
        <button id="wheelTab" class="tab" role="tab" aria-selected="false">
          <span class="step">2</span> Wheel
        </button>
        <button id="placementTab" class="tab" role="tab" aria-selected="false">
          <span class="step">3</span> Wheels
        </button>
        <button id="propertiesTab" class="tab" role="tab" aria-selected="false">
          <span class="step">4</span> Performance
        </button>
        <button id="submitTab" class="tab" role="tab" aria-selected="false">
          <span class="step">5</span> Submit
        </button>
      </div>

      <!-- =======================
           BODY CONTROLS
           Buttons simplified: Draw / Move / Upload image / Clear
           Added Pen thickness next to pen colour
           ======================= -->
      <section id="bodyControls" class="tab-content active" role="tabpanel">
        <h2 class="panel-title">Car body</h2>
        <p class="panel-subtitle">
          Draw the body or upload an image. Use <strong>Move</strong> to drag it around.
        </p>

        <div class="control-group">
          <div class="row">
            <button id="bodyPenBtn" class="btn primary">Draw</button>
            <button id="bodyMoveBtn" class="btn">Move</button>
          </div>

          <div class="row-tight">
            <label class="field compact">
              <span>Pen colour</span>
              <input type="color" id="bodyColor" value="#3B0273" />
            </label>

            <label class="field compact">
              <span>Thickness</span>
              <input type="range" id="bodyThickness" min="1" max="20" step="1" value="4" />
            </label>
          </div>

          <div class="stack">
            <label class="file">
              Upload image
              <input type="file" id="uploadBody" accept="image/*" />
            </label>
          </div>

          <div class="row">
            <button id="bodyUndoBtn" class="btn">Undo</button>
            <button id="bodyRedoBtn" class="btn">Redo</button>
          </div>

          <div class="stack">
            <button id="bodyClearBtn" class="btn danger">Clear</button>
          </div>
        </div>
      </section>

      <!-- =======================
           WHEEL CONTROLS
           Buttons simplified: Draw / Move / Upload image (square) / Clear
           Added Pen thickness next to pen colour
           ======================= -->
      <section id="wheelControls" class="tab-content" role="tabpanel">
        <h2 class="panel-title">Wheel</h2>
        <p class="panel-subtitle">
          Draw or upload a wheel. This becomes the “master wheel” you place multiple times.
        </p>

        <div class="control-group">
          <div class="row">
            <button id="wheelPenBtn" class="btn primary">Draw</button>
            <button id="wheelMoveBtn" class="btn">Move</button>
          </div>

          <div class="row-tight">
            <label class="field compact">
              <span>Pen colour</span>
              <input type="color" id="wheelColor" value="#3B0273" />
            </label>

            <label class="field compact">
              <span>Thickness</span>
              <input type="range" id="wheelThickness" min="1" max="20" step="1" value="4" />
            </label>
          </div>

          <div class="stack">
            <label class="file">
              Upload image (square)
              <input type="file" id="uploadWheel" accept="image/*" />
            </label>
          </div>

          <div class="row">
            <button id="wheelUndoBtn" class="btn">Undo</button>
            <button id="wheelRedoBtn" class="btn">Redo</button>
          </div>

          <div class="stack">
            <button id="wheelClearBtn" class="btn danger">Clear</button>
          </div>
        </div>
      </section>

      <!-- =======================
           PLACEMENT CONTROLS
           ======================= -->
      <section id="placementControls" class="tab-content" role="tabpanel">
        <h2 class="panel-title">Place wheels</h2>
        <p class="panel-subtitle">
          Click a wheel to select it, drag it, then scale/rotate using the sliders.
        </p>

        <div class="control-group">
          <button id="addWheelBtn" class="btn primary">Add wheel to car</button>

          <div class="row">
            <button id="duplicateWheelBtn" class="btn">Duplicate selected</button>
            <button id="deleteWheelBtn" class="btn danger">Delete selected</button>
          </div>

          <hr class="divider" />

          <label class="field">
            <span>Selected wheel scale</span>
            <input type="range" id="wheelScale" min="0.2" max="3" step="0.05" value="1" />
          </label>

          <label class="field">
            <span>Selected wheel rotation</span>
            <input type="range" id="wheelRotation" min="-180" max="180" step="1" value="0" />
          </label>

          <div class="pill-row">
            <span class="pill" id="selectedWheelLabel">No wheel selected</span>
            <span class="pill" id="wheelCountLabel">Wheels: 0</span>
          </div>
        </div>
      </section>

      <!-- =======================
           PROPERTIES CONTROLS
           - Removed Balanced + Speedster buttons
           ======================= -->
      <section id="propertiesControls" class="tab-content" role="tabpanel">
        <h2 class="panel-title">Performance (100 credits)</h2>
        <p class="panel-subtitle">
          Allocate exactly <strong>100</strong> credits between acceleration and top speed.
        </p>

        <div class="control-group">
          <label class="field">
            <span>Acceleration: <strong id="accVal">50</strong></span>
            <input type="range" id="acceleration" min="0" max="100" step="1" value="50" />
          </label>

          <label class="field">
            <span>Top speed: <strong id="speedVal">50</strong></span>
            <input type="range" id="topSpeed" min="0" max="100" step="1" value="50" />
          </label>

          <div class="pill-row">
            <span class="pill emphasis">
              Remaining: <strong id="pointsRemaining">0</strong>
            </span>
            <span class="pill" id="creditsHelp">Must be 0 to submit</span>
          </div>
        </div>
      </section>

      <!-- =======================
           SUBMIT CONTROLS
           ======================= -->
      <section id="submitControls" class="tab-content" role="tabpanel">
        <h2 class="panel-title">Submit</h2>
        <p class="panel-subtitle">
          We’ll send your artwork + wheel layout + performance credits to the server.
        </p>

        <div class="control-group">
          <label class="field">
            <span>Team name</span>
            <input type="text" id="teamName" placeholder="e.g., Team Turbo" />
          </label>

          <label class="field">
            <span>Car name</span>
            <input type="text" id="carName" placeholder="e.g., Biscuit Rocket" />
          </label>

          <label class="field">
            <span>Email</span>
            <input type="email" id="email" placeholder="you@example.com" />
          </label>

          <div class="stack">
            <button id="submitBtn" class="btn primary">Submit car</button>
          </div>

          <p id="submitStatus" class="submit-status" aria-live="polite"></p>
        </div>

        <div class="note">
          Endpoint configured in <code>script.js</code>.
        </div>
      </section>
    </aside>

    <!-- MAIN WORKSPACE -->
    <main id="workspace" aria-label="Canvas workspace">
      <div class="workspace-inner">
        <div class="canvas-card">
          <div class="canvas-header">
            <div>
              <div class="canvas-title" id="canvasTitle">Body canvas</div>
              <div class="canvas-subtitle" id="canvasSubtitle">Draw the car body here</div>
            </div>

            <div class="canvas-actions">
              <button id="centerBodyBtn" class="btn small">Center body</button>
              <button id="exportPreviewBtn" class="btn small">Export as PNG</button>
            </div>
          </div>

          <div class="canvas-wrap">
            <canvas id="bodyCanvas" width="1024" height="512"></canvas>
            <canvas id="wheelCanvas" width="256" height="256"></canvas>
          </div>

          <div class="workspace-tips" aria-label="Tips">
            <div class="tips-title">Tips</div>
            <div class="tips-text" id="tipsText">
              Draw the car body or upload a PNG with transparency.
            </div>
          </div>
        </div>
      </div>
    </main>
  </div>

  <!-- FOOTER -->
  <footer class="site-footer" role="contentinfo">
    <div class="footer-inner">
      <div class="footer-links">
        <a href="index.html">Home</a>
        <a href="races.html">Races</a>
        <a href="faq.html">FAQ</a>
        <a href="contact.html">Contact</a>
      </div>

      <div class="footer-meta">
        © <span id="footerYear"></span> Rapid Racers 2D | <span id="versionInfo"></span>
      </div>
    </div>
  </footer>

  <script src="script.js"></script>
  <script src="editor.js"></script>
</body>
</html>
